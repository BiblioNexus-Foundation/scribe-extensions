import{j as e,V as u,a as c,g as T,h as V,i as S,v as C,r as E}from"../index.js";import{p as k,m as I}from"../marked.esm.js";const M=n=>k.sanitize(I.parse(n)),L=({note:{ID:n,Quote:t,Note:a}})=>{const o=t||"General Verse Note";return e.jsxs("div",{id:`note_${n}`,children:[e.jsx("h3",{children:o}),e.jsx("div",{dangerouslySetInnerHTML:{__html:M(a)}})]})},P=({notes:n,currentIndex:t,incrementIndex:a,decrementIndex:o})=>e.jsxs("div",{className:"scroller-container",children:[e.jsxs("div",{id:"note-position",children:[t+1," of ",n.length]}),e.jsxs("div",{className:"column-container",children:[e.jsx(u,{onClick:o,appearance:"icon","aria-label":"left",children:e.jsx("span",{className:"arrow-button codicon codicon-chevron-left"})}),e.jsx("div",{id:"note-container",children:e.jsx(L,{note:n[t]})}),e.jsx(u,{onClick:a,appearance:"icon","aria-label":"right",children:e.jsx("span",{className:"arrow-button codicon codicon-chevron-right"})})]})]}),R=n=>{const t=n.match(/([A-Za-z0-9]{3}) (\d+):(\d+)/);return t?{bookID:t[1],chapter:parseInt(t[2],10),verse:parseInt(t[3],10)}:{bookID:"GEN",chapter:1,verse:1}};function y(){var p;const[n,t]=c.useState(1),[a,o]=c.useState(1),[v,i]=c.useState(0),[r,j]=c.useState({}),f=s=>{const{verseRef:d}=s,{chapter:l,verse:x}=R(d);t(l),o(x),i(0)},m=s=>{const{command:d,data:l}=s.data;({update:h=>j(h),changeRef:h=>f(h)})[d](l)};function g(){C.postMessage({command:"loaded",text:"Webview first load success"})}c.useEffect(()=>(window.addEventListener("message",m),g(),()=>{window.removeEventListener("message",m)}),[]);const N=()=>i(s=>s<r[n][a].length-1?s+1:s),w=()=>i(s=>s>0?s-1:s),b=(p=r==null?void 0:r[n])!=null&&p[a]?e.jsx(P,{notes:r[n][a]||{},currentIndex:v,incrementIndex:N,decrementIndex:w}):"No translation notes available for this verse.";return e.jsx("main",{children:e.jsx("section",{className:"translation-note-view",children:e.jsxs(T,{activeid:"tab-verse","aria-label":"note-type-tab",children:[e.jsx(V,{id:"tab-verse",children:"VERSE NOTES"}),e.jsx(S,{id:"view-verse",children:b})]})})})}const F=()=>e.jsx(y,{});E(e.jsx(F,{}));
